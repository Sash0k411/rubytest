<!DOCTYPE html>
<html>
  <head>
    <title> NEW Depot</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <script type="text/javascript">
      I18n.defaultLocale = "<%= I18n.default_locale %>";
      I18n.locale = "<%= I18n.locale %>";
    </script>
    <%= javascript_pack_tag 'locale_switcher', 'data-turbolinks-track': 'reload' %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  </head>
  <body>
    <header class="main">
      <aside>
        <div class="form-group">
        <%= form_tag store_index_path, class: 'locale' do %>
          <%= select_tag 'set_locale',
                         options_for_select(LANGUAGES, I18n.locale.to_s),
                         onchange: 'this.form.submit()'%>
          <%= submit_tag 'submit', id: "submit_locale_change" %>
        <% end %>
        </div>
      </aside>
  <div>
      <%= image_tag 'logo.svg', alt: 'The Pragmatic Bookshelf' %>

      <% if @current_user.try("admin?") %>
        <nav class="navbar navbar-text">
          <form class = "form-inline">
            <a href = "/orders" class="btn btn-link">Orders</a>
            <a href = "/products" class="btn btn-link">Products</a>
            <a href = "/users" class="btn btn-link">Users</a>
            <a href = "/categories" class="btn btn-link">Categories</a>
            <td><%= button_to 'Logout', logout_path, method: :delete, class: "btn btn-link"%></td>
          </form>
        </nav>
      <% end %>
      </div>
      <h1><%= @page_title %></h1>

    </header>
    <section class="content">
      <nav class="side_nav">
       <% if @cart %>
          <div id="cart" class="carts">
            <%= render_if @cart && @cart.line_items.any?, @cart %>
          </div>
       <% end %>
      </nav>
      <nav id="sidebarMenu" class="collapse d-lg-block">
        <div class="mx-3 mt-4">
          <a
            href="/"
            class="btn btn-link d-block"
            aria-current="true">
            <i class="fas fa-tachometer-alt fa-fw me-3"></i><span><%= t('.home') %></span>
          </a>
          <a href="/questions" class="btn btn-link d-block">
            <i class="fas fa-chart-area fa-fw me-3"></i><span><%= t('.questions') %></span>
          </a>
          <a href="/news" class="btn btn-link d-block">
            <i class="fas fa-lock fa-fw me-3"></i><span><%= t('.news') %></span></a>
          <a href="/contact" class="btn btn-link d-block">
            <i class="fas fa-chart-line fa-fw me-3"></i><span><%= t('.contact') %></span>
          </a>
          <% Category.all.each do |category| %>
            <i class="btn btn-link d-block fas fa-chart-line fa-fw me-3"><%= link_to category.name, category %></i>
          <% end %>
        </div>
      </nav>
      <main class='<%= controller.controller_name %>'>
        <%= yield %>
      </main>
    </section>
  </body>
</html>
